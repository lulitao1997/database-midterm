{% extends "dashboard-base.html" %}


{% block dashboard_content %}
<h2>我的课表</h2>
<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>周日</th>
        <th>周一</th>
        <th>周二</th>
        <th>周三</th>
        <th>周四</th>
        <th>周五</th>
        <th>周六</th>
      </tr>
    </thead>
    <tbody>
      {% for j in [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14 ] %}
      <tr>
        <td>{{ j }}</td>
        {% for i in [ 7, 1, 2, 3, 4, 5, 6 ] %}
        <td id="{{ i }}-{{ j }}">{{ cname[i, j] }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div class="table-responsive">
  <form method="POST"> 
	<table class="table table-striped table-bordered">	
	  <div class="row">
		<div class="col-md-2"> <h3>检索课程</h3></div>
	  </div>
	  <thead>
		<th>课程编号</th>
		<th>课程名</th>
		<th>教师</th>
	  </thead>
	  <tbody> 
		<tr>
		  <th><input style="width: 270px;" type="text" class="form-control" name="cno"></th>
		  <th><input style="width: 270px;" type="text" class="form-control" name="cname"></th>
		  <th><input style="width: 270px;" type="text" class="form-control" name="tname"></th>
		<tr>
	  </tbody>	
	</table>
	<button class="btn btn-md btn-primary btn-block" type="submit" style="display: inline-block; width: 100px">检索</button>	
  </form>
  <hr>
  <table class="table table-striped table-bordered">
	<br>
	<div class="row">
	  <div class="col-md-2"> <h3>可选课程</h3></div>
	</div>
	<thead>
	  <th><div style="width: 140px;">课程编号</div></th>
	  <th><div style="width: 140px;">课程名</div></th>
	  <th><div style="width: 140px;">教师</div></th>
	  <th><div style="width: 140px;">学分</div></th>
	  <th><div style="width: 140px;">容量</div></th>
	  <th><div style="width: 40px;">选项</div></th>
	</thead>
	<tbody>
	  {% for cou in course %}
	  <tr>
		{% for info in cou.info %}
		<th onclick="HighLightCell{{ cou.cid }}()">{{ info }} </th>
		{% endfor %}
		<th><button class="btn btn-sm btn-{%- if cou.done -%}warning{%- else -%}primary{% endif %} btn-block" type=submit>
			{%- if cou.done -%}重修{%- else -%}选课{%- endif -%}
		</button></th>		
	  </tr>
	  {% endfor %}
	</tbody>
	<table>
</div> 

<script>
	function clear() {
		for (var i = 1; i <= 14; i++)
		for (var j = 1; j <= 7; j++) {
			document.getElementById(j + '-' + i).style.background="";
		}	
	}
	
	{% for cou in course %}
		function HighLightCell{{ cou.cid }}() {
			clear();
			{% for cell in cou.cells %}
			document.getElementById("{{ cell }}").style.background="#F5DEB3";
			{% endfor %}
		}
	{% endfor %}
</script>
{% endblock %}
