{% extends "dashboard-base.html" %}


{% block dashboard_content %}
<h2>我的课表</h2>
<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>周日</th>
        <th>周一</th>
        <th>周二</th>
        <th>周三</th>
        <th>周四</th>
        <th>周五</th>
        <th>周六</th>
      </tr>
    </thead>
    <tbody>
      {% for j in [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14 ] %}
      <tr>
        <td>{{ j }}</td>
        {% for i in [ 7, 1, 2, 3, 4, 5, 6 ] %}
        <td id="{{ i }}-{{ j }}">{{ cnameincell[i][j] }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<hr>
<br>
<h2>可选课程</h2>
<div class="table-responsive">
  <table class="table table-striped table-bordered">
	<thead>
	  <th><div style="width: 140px;">课程编号</div></th>
	  <th><div style="width: 140px;">课程名</div></th>
	  <th><div style="width: 140px;">教师</div></th>
	  <th><div style="width: 140px;">学分</div></th>
	  <th><div style="width: 140px;">容量</div></th>
	  <th><div style="width: 40px;">选项</div></th>
	</thead>
	<tbody>
	  {% for cou in course %}
	  <form method="POST">
	  <tr>
		{% for info in cou.info %}
		<th onclick="HighLightCell{{ cou.cid }}()">{{ info }} </th>
		{% endfor %}
		<th>
			<input type="hidden" name="select" value="{{ cou.cid }}"></input>
			<button type="submit" class="btn btn-{%- if cou.done -%}warning{%- else -%}primary{% endif %} btn-block btn-sm" type=submit>
				{%- if cou.done -%}重修{%- else -%}选课{%- endif -%}
			</button>
		</th>
	  </tr>
	  </form>
	  {% endfor %}
	</tbody>
	<table>
  <ul class="pagination justify-content-center">
    <form method="POST">
		<input type="hidden" name="turnpage" value=""></input>
		<li class="page-item {% if pagenumber == 1 -%} disabled {%- endif -%}">
		  <a class="page-link" type="submit" name="turnpage" value="past" tabindex="-1"><<</a>
		</li>
		{% for i in range(pageamount) %}
		<li class="page-item {% if pagenumber == i + 1 -%}active{%- endif -%}"><a class="page-link" type="submit" name="turnpage" value="{{ i + 1 }}"> {{ i + 1 }}</a></li>
		{% endfor %}
		<li class="page-item {% if pagenumber == pageamount -%} disabled {%- endif -%}">
		  <a class="page-link" type="submit" name="turnpage" value="next">>></a>
		</li>
    </form>
  </ul>
<br>
<hr>
<br>
<h2>检索课程</h2>
	<table class="table table-striped table-bordered">	
	  <thead>
		<th>课程编号</th>
		<th>课程名</th>
		<th>教师</th>
		<th>选项</th>
	  </thead>
	  <form method="post">
	  <input type="hidden" name="search" value=""></input>
	  <tbody>
		<tr>
		  <th><div style="width: 240px;"><input type="text" class="form-control" name="cno"></input></div></th>
		  <th><div style="width: 240px;"><input type="text" class="form-control" name="cname"></input></div></th>
		  <th><div style="width: 240px;"><input type="text" class="form-control" name="tname"></input></div></th>
		  <th><button class="btn btn-sm btn-primary btn-block" type="submit" style="display: inline-block; width: 40px">检索</button></th>
		<tr>
	  </tbody>
	  </form>
	</table>
<script>
	function clear() {
		for (var i = 1; i <= 14; i++)
		for (var j = 1; j <= 7; j++) {
			document.getElementById(j + '-' + i).style.background="";
		}	
	}
	
	{% for cou in course %}
		function HighLightCell{{ cou.cid }}() {
			clear();
			{% for cell in cou.cells %}
			document.getElementById("{{ cell }}").style.background="#F5DEB3";
			{% endfor %}
		}
	{% endfor %}
</script>
{% endblock %}
